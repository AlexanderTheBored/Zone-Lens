<!-- index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>ZoneGuide – Mandaue Flood Risk Analysis</title>
  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />

  <!-- Mapbox GL -->
  <link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet" />
  <script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>

  <!-- Your CSS -->
  <link rel="stylesheet" href="./styles.css" />
</head>

<body>
  <div id="map"></div>

  <!-- Compass display (top center) -->
  <div class="compass-container" id="compassContainer">
    <div class="compass-display">
      <div class="compass-north" id="compassNorth">N</div>
      <div class="compass-divider"></div>
      <div class="compass-bearing" id="compassBearing">0°</div>
    </div>
  </div>

  <div class="search-box">
    <input
      type="text"
      id="searchInput"
      class="search-input"
      placeholder="Search for address, building, or place in Mandaue..."
      autocomplete="off"
    />
    <div id="searchResults" class="search-results"></div>
  </div>

  <div class="controls">
    <h3>Project Filter</h3>
    <button class="filter-btn active" data-filter="all">
      <span>View All Zones</span>
    </button>
    <button class="filter-btn" data-filter="house">
      <span>Residential Project</span>
    </button>
    <button class="filter-btn" data-filter="factory">
      <span>Industrial Facility</span>
    </button>
    <button class="filter-btn" data-filter="mall">
      <span>Commercial Complex</span>
    </button>
  </div>

  <div class="legend">
    <h4>Zoning Districts</h4>
    <div class="legend-item"><span class="color-box" style="background:#facc15"></span>Residential (R-1)</div>
    <div class="legend-item"><span class="color-box" style="background:#a855f7"></span>Industrial (I-2)</div>
    <div class="legend-item"><span class="color-box" style="background:#3b82f6"></span>Commercial (C-2)</div>
    <div class="legend-item"><span class="color-box" style="background:#10b981"></span>Mixed-Use (MU-1)</div>

    <h4 style="margin-top:18px;">Flood Risk Zones</h4>
    <div class="legend-item"><span class="color-box" style="background:#b91c1c"></span>Critical (Roof-level)</div>
    <div class="legend-item"><span class="color-box" style="background:#dc2626"></span>High Risk (Chest-deep)</div>
    <div class="legend-item"><span class="color-box" style="background:#f59e0b"></span>Moderate (Knee-deep)</div>
    <div class="legend-item"><span class="color-box" style="background:#fbbf24"></span>Low (Street flooding)</div>
  </div>

  <div class="elevation-controls">
    <h3>Map Layers</h3>
    <button class="toggle-btn" id="terrainBtn">3D Terrain Map</button>
    <button class="toggle-btn" id="buildingsBtn">3D Buildings</button>
    <button class="toggle-btn" id="floodBtn">Flood Risk Zones</button>
    <button class="toggle-btn" id="riverBtn">Water Bodies</button>
    <button class="toggle-btn" id="contourBtn">Elevation Lines</button>

    <div class="info-box">
      <strong>Data Sources:</strong> MCDRRMO 2022-2025 flood incidents<br />
      <strong>Recent Event:</strong> 29,000+ evacuated Nov 2025<br /><br />
      <em>Tip: Toggle multiple layers to analyze flood patterns and terrain elevation</em>
    </div>
  </div>

  <!-- AI Chatbot Interface -->
  <button class="chatbot-button" id="chatbotToggle" aria-label="Open Zone Bot">
    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
      <path d="M12 2C6.48 2 2 6.48 2 12c0 1.54.36 3 .97 4.29L2 22l5.71-.97C9 21.64 10.46 22 12 22c5.52 0 10-4.48 10-10S17.52 2 12 2zm0 18c-1.38 0-2.68-.31-3.85-.85l-.27-.13-2.82.48.48-2.82-.13-.27C4.31 14.68 4 13.38 4 12c0-4.41 3.59-8 8-8s8 3.59 8 8-3.59 8-8 8zm-3-7h2v2H9v-2zm4 0h2v2h-2v-2z"/>
    </svg>
  </button>

  <div class="chatbot-window" id="chatbotWindow">
    <div class="chatbot-header">
      <h3>Zone Bot</h3>
      <button class="close-btn" id="chatbotClose" aria-label="Close">&times;</button>
    </div>

    <div class="chatbot-messages" id="chatbotMessages">
      <div class="chat-message system">
        Welcome! I can help you understand flood risks, zoning regulations, and map features. Ask me anything!
      </div>
    </div>

    <div class="chatbot-input-area">
      <input
        type="text"
        class="chatbot-input"
        id="chatbotInput"
        placeholder="Ask about flood zones, zoning, or map features..."
        autocomplete="off"
      />
      <button class="chatbot-send-btn" id="chatbotSend">Send</button>
    </div>
  </div>

  <!-- Your JS -->
  <script src="./app.js"></script>
</body>
</html>
