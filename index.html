<!-- index.html -->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>ZoneGuide – Mandaue Flood Risk Analysis</title>
  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />

  <!-- Mapbox GL -->
  <link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet" />
  <script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>

  <!-- Your CSS -->
  <link rel="stylesheet" href="./styles.css" />
</head>

<body>
  <div id="map"></div>

  <!-- Compass display (top center) -->
  <div class="compass-container" id="compassContainer">
    <div class="compass-display">
      <div class="compass-north" id="compassNorth">N</div>
      <div class="compass-divider"></div>
      <div class="compass-bearing" id="compassBearing">0°</div>
    </div>
  </div>

  <div class="search-box">
    <input type="text" id="searchInput" class="search-input"
      placeholder="Search for address, building, or place in Mandaue..." autocomplete="off" />
    <div id="searchResults" class="search-results"></div>
  </div>

  <div class="controls">
    <h3>
      Project Filter
      <span class="tooltip-icon"
        data-tooltip="Filter zones by project type to see which areas allow specific developments">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"></circle>
          <line x1="12" y1="16" x2="12" y2="12"></line>
          <line x1="12" y1="8" x2="12.01" y2="8"></line>
        </svg>
      </span>
    </h3>
    <button class="filter-btn active" data-filter="all">
      <span>View All Zones</span>
    </button>
    <button class="filter-btn" data-filter="house">
      <span>Residential Project</span>
    </button>
    <button class="filter-btn" data-filter="factory">
      <span>Industrial Facility</span>
    </button>
    <button class="filter-btn" data-filter="mall">
      <span>Commercial Complex</span>
    </button>
  </div>

  <div class="legend">
    <h4>
      Zoning Districts
      <span class="tooltip-icon"
        data-tooltip="Color-coded zones showing permitted land use types and development regulations">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"></circle>
          <line x1="12" y1="16" x2="12" y2="12"></line>
          <line x1="12" y1="8" x2="12.01" y2="8"></line>
        </svg>
      </span>
    </h4>
    <div class="legend-item"><span class="color-box" style="background:#facc15"></span>Residential (R-1)</div>
    <div class="legend-item"><span class="color-box" style="background:#a855f7"></span>Industrial (I-2)</div>
    <div class="legend-item"><span class="color-box" style="background:#3b82f6"></span>Commercial (C-2)</div>
    <div class="legend-item"><span class="color-box" style="background:#10b981"></span>Mixed-Use (MU-1)</div>

    <h4 style="margin-top:18px;">
      Flood Risk Zones
      <span class="tooltip-icon"
        data-tooltip="Historical flood data showing water depth levels during typhoons and heavy rainfall">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"></circle>
          <line x1="12" y1="16" x2="12" y2="12"></line>
          <line x1="12" y1="8" x2="12.01" y2="8"></line>
        </svg>
      </span>
    </h4>
    <div class="legend-item"><span class="color-box" style="background:#b91c1c"></span>Critical (Roof-level)</div>
    <div class="legend-item"><span class="color-box" style="background:#dc2626"></span>High Risk (Chest-deep)</div>
    <div class="legend-item"><span class="color-box" style="background:#f59e0b"></span>Moderate (Knee-deep)</div>
    <div class="legend-item"><span class="color-box" style="background:#fbbf24"></span>Low (Street flooding)</div>
  </div>

  <div class="elevation-controls">
    <h3>
      Map Layers
      <span class="tooltip-icon"
        data-tooltip="Toggle visualization layers to analyze terrain elevation, buildings, and water features">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"></circle>
          <line x1="12" y1="16" x2="12" y2="12"></line>
          <line x1="12" y1="8" x2="12.01" y2="8"></line>
        </svg>
      </span>
    </h3>
    <button class="toggle-btn" id="terrainBtn">3D Terrain Map</button>
    <button class="toggle-btn" id="buildingsBtn">3D Buildings</button>
    <button class="toggle-btn" id="floodBtn">Flood Risk Zones</button>
    <button class="toggle-btn" id="riverBtn">Water Bodies</button>
    <button class="toggle-btn" id="contourBtn">Elevation Lines</button>

    <div class="info-box">
      <strong>Data Sources:</strong> MCDRRMO 2022-2025 flood incidents<br />
      <strong>Recent Event:</strong> 29,000+ evacuated Nov 2025<br /><br />
      <em>Tip: Toggle multiple layers to analyze flood patterns and terrain elevation</em>
    </div>
  </div>

  <!-- AI Chatbot Interface -->
  <button class="chatbot-button" id="chatbotToggle" aria-label="Open BelaBot">
    <svg viewBox="0 0 100 100">
      <!-- Ears -->
      <path d="M30,40 Q20,5 35,5 Q50,5 45,40" fill="#e0e0e0" />
      <path d="M70,40 Q80,5 65,5 Q50,5 55,40" fill="#e0e0e0" />

      <!-- Head -->
      <circle cx="50" cy="60" r="30" fill="#ffffff" />

      <!-- Visor -->
      <rect x="28" y="52" width="44" height="20" rx="8" fill="#111" />

      <!-- Eyes with glow animation -->
      <circle cx="42" cy="62" r="4" fill="#ff3333" class="eye-glow" />
      <circle cx="58" cy="62" r="4" fill="#ff3333" class="eye-glow" />

      <!-- Hat -->
      <path d="M25,45 Q50,5 75,45" fill="#ffc107" stroke="none" />
      <path d="M20,45 L80,45 Q82,50 78,50 L22,50 Q18,50 20,45" fill="#ffc107" />
      <path d="M50,15 L50,45" stroke="#e0a800" stroke-width="2" />

      <!-- BB Logo on hat -->
      <text x="50" y="38" class="hat-logo">BB</text>

      <!-- Smile -->
      <path d="M28,80 Q50,92 72,80" stroke="#ffc107" stroke-width="4" stroke-linecap="round" fill="none" />
    </svg>
  </button>

  <div class="chatbot-window" id="chatbotWindow">
    <div class="chatbot-header">
      <svg viewBox="0 0 100 100" class="belabot-header-icon">
        <!-- Ears -->
        <path d="M30,40 Q20,5 35,5 Q50,5 45,40" fill="#e0e0e0" />
        <path d="M70,40 Q80,5 65,5 Q50,5 55,40" fill="#e0e0e0" />

        <!-- Head -->
        <circle cx="50" cy="60" r="30" fill="#ffffff" />

        <!-- Visor -->
        <rect x="28" y="52" width="44" height="20" rx="8" fill="#111" />

        <!-- Eyes with glow animation -->
        <circle cx="42" cy="62" r="4" fill="#ff3333" class="eye-glow" />
        <circle cx="58" cy="62" r="4" fill="#ff3333" class="eye-glow" />

        <!-- Hat -->
        <path d="M25,45 Q50,5 75,45" fill="#ffc107" stroke="none" />
        <path d="M20,45 L80,45 Q82,50 78,50 L22,50 Q18,50 20,45" fill="#ffc107" />
        <path d="M50,15 L50,45" stroke="#e0a800" stroke-width="2" />

        <!-- BB Logo on hat -->
        <text x="50" y="38" class="hat-logo">BB</text>

        <!-- Smile -->
        <path d="M28,80 Q50,92 72,80" stroke="#ffc107" stroke-width="4" stroke-linecap="round" fill="none" />
      </svg>
      <h3>BelaBot</h3>
      <button class="close-btn" id="chatbotClose" aria-label="Close">&times;</button>
    </div>

    <div class="chatbot-messages" id="chatbotMessages">
      <div class="chat-message system">
        Welcome! I can help you understand flood risks, zoning regulations, and map features. Ask me anything!
      </div>
    </div>

    <div class="chatbot-input-area">
      <input type="text" class="chatbot-input" id="chatbotInput"
        placeholder="Ask about flood zones, zoning, or map features..." autocomplete="off" />
      <button class="chatbot-send-btn" id="chatbotSend">Send</button>
    </div>
  </div>

  <!-- Your JS -->
  <script src="./app.js"></script>
</body>

</html>
